<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clear Function Test - Auto-Detected Questions</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .instructions {
            background: #e6f3ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #007acc;
        }
        .test-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }
        .keyboard-shortcuts {
            background: #d1ecf1;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #17a2b8;
        }
        .keyboard-shortcut {
            background: #e2e3e5;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: monospace;
            font-weight: bold;
        }
        .test-steps {
            background: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }
        .question {
            background: #f0f8ff;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border: 2px dashed #667eea;
            cursor: pointer;
        }
        .question:hover {
            background: #e6f3ff;
        }
        .math-problem {
            background: #f0f9ff;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border: 2px dashed #48bb78;
            cursor: pointer;
        }
        .math-problem:hover {
            background: #e6f9ff;
        }
    </style>
</head>
<body>
    <h1>üßπ Clear Function Test - Auto-Detected Questions</h1>
    
    <div class="instructions">
        <h3>üéØ Test Clear Function with Auto-Detected Content:</h3>
        <p>This test verifies that the clear function (`Ctrl+Shift+D`) properly clears all auto-detected questions, math problems, and other content.</p>
    </div>

    <div class="keyboard-shortcuts">
        <h3>‚å®Ô∏è Keyboard Shortcuts:</h3>
        <ul>
            <li><span class="keyboard-shortcut">Ctrl+Shift+A</span> - Toggle image selection mode</li>
            <li><span class="keyboard-shortcut">Ctrl+Shift+D</span> - Deselect all (clear selections and highlights)</li>
            <li><span class="keyboard-shortcut">Ctrl+Shift+M</span> - Toggle multi-select mode</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>üìù Test Steps:</h3>
        <div class="test-steps">
            <ol>
                <li><strong>Click on questions below</strong> to auto-detect them</li>
                <li><strong>Click on math problems</strong> to auto-detect them</li>
                <li><strong>Select some text</strong> manually</li>
                <li><strong>Check for highlights</strong> - should see blue backgrounds</li>
                <li><strong>Press Ctrl+Shift+D</strong> to clear everything</li>
                <li><strong>Verify:</strong> All highlights, selections, and auto-detected content should be cleared!</li>
            </ol>
        </div>
    </div>

    <div class="test-section">
        <h3>‚ùì Auto-Detected Questions (Click These):</h3>
        <div class="question">
            <strong>Question 1:</strong> What is the capital of France?
        </div>
        <div class="question">
            <strong>Question 2:</strong> How does photosynthesis work?
        </div>
        <div class="question">
            <strong>Question 3:</strong> Why do we need to study mathematics?
        </div>
        <div class="question">
            <strong>Question 4:</strong> Which planet is closest to the Sun?
        </div>
        <div class="question">
            <strong>Question 5:</strong> What are the benefits of reading books?
        </div>
    </div>

    <div class="test-section">
        <h3>üßÆ Auto-Detected Math Problems (Click These):</h3>
        <div class="math-problem">
            <strong>Problem 1:</strong> Solve for x: 2x + 5 = 13
        </div>
        <div class="math-problem">
            <strong>Problem 2:</strong> Calculate the area of a rectangle with length 8 cm and width 5 cm
        </div>
        <div class="math-problem">
            <strong>Problem 3:</strong> Find the value of y when x = 3 in the equation y = 2x + 1
        </div>
        <div class="math-problem">
            <strong>Problem 4:</strong> What is 15% of 200?
        </div>
    </div>

    <div class="test-section">
        <h3>üìñ Manual Text Selection (Select These):</h3>
        <p>This is a sample paragraph for manual text selection. You can highlight any part of this text to test the clear function. The clear function should remove all highlights, including manually selected text and auto-detected content.</p>
        
        <p>Try selecting different parts of this text and then use the clear function to verify that everything gets cleared properly. The extension should handle both manual selections and automatic detections consistently.</p>
    </div>

    <div class="test-section">
        <h3>üéØ What to Look For:</h3>
        <ul>
            <li><strong>‚úÖ Auto-Detection:</strong> Questions and math problems should be highlighted when clicked</li>
            <li><strong>‚úÖ Manual Selection:</strong> Text should be highlighted when selected</li>
            <li><strong>‚úÖ Clear Function:</strong> Ctrl+Shift+D should remove ALL highlights</li>
            <li><strong>‚úÖ No Leftovers:</strong> No blue backgrounds or highlights should remain</li>
            <li><strong>‚úÖ Complete Reset:</strong> All modes and selections should be cleared</li>
        </ul>
    </div>

    <div class="test-steps">
        <h3>üîç Advanced Testing:</h3>
        <ol>
            <li><strong>Mix Content Types:</strong> Click questions, math problems, and select text</li>
            <li><strong>Test Multiple Times:</strong> Clear, select again, clear again</li>
            <li><strong>Test Different Orders:</strong> Try selecting in different sequences</li>
            <li><strong>Test Page Refresh:</strong> Refresh and test again</li>
            <li><strong>Test Different Sites:</strong> Try on other websites</li>
        </ol>
    </div>

    <div class="instructions">
        <h3>üí° Expected Behavior:</h3>
        <ul>
            <li><strong>Auto-detection works</strong> for questions and math problems</li>
            <li><strong>Manual selection works</strong> for any text</li>
            <li><strong>Clear function removes everything</strong> - no exceptions</li>
            <li><strong>Visual feedback is consistent</strong> across all content types</li>
            <li><strong>No memory leaks</strong> - everything gets properly cleaned up</li>
        </ul>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Clear function test loaded');
            
            // Add click handlers to questions and math problems
            document.querySelectorAll('.question, .math-problem').forEach(element => {
                element.addEventListener('click', function() {
                    console.log('Clicked element:', this.textContent.substring(0, 50) + '...');
                });
            });
            
            // Add visual feedback for selections
            document.addEventListener('mouseup', function() {
                const selection = window.getSelection();
                const text = selection.toString().trim();
                
                if (text.length > 0) {
                    console.log('Text selected:', text.substring(0, 50) + '...');
                }
            });
        });
    </script>
</body>
</html>
