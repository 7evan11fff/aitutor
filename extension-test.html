<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extension Test - Force Refresh</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: #f0f9ff;
            border: 2px solid #48bb78;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            cursor: pointer;
            user-select: text;
        }
        .test-section:hover {
            background: #e6fffa;
        }
        .instructions {
            background: #e6f3ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #007acc;
        }
        .debug-info {
            background: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }
        .success {
            background: #d4edda;
            border: 2px solid #28a745;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üîß Extension Test - Force Refresh</h1>
    
    <div class="instructions">
        <h3>üéØ Test Steps:</h3>
        <ol>
            <li><strong>Open Console:</strong> Press F12 and go to Console tab</li>
            <li><strong>Look for:</strong> "VERSION 2.0 - Word Count Fixed" message</li>
            <li><strong>Check timestamp:</strong> Should be recent (not old)</li>
            <li><strong>Verify word count test:</strong> Should show "10" (not 9)</li>
            <li><strong>Select text below</strong> and test word counting</li>
        </ol>
    </div>

    <div class="debug-info">
        <h3>üîç What to Look For in Console:</h3>
        <ul>
            <li><strong>‚úÖ VERSION 2.0 message</strong> - Confirms new code loaded</li>
            <li><strong>‚úÖ Recent timestamp</strong> - Shows when code was loaded</li>
            <li><strong>‚úÖ Word count test: 10</strong> - Verifies word counting works</li>
            <li><strong>‚ùå If you see old messages</strong> - Extension needs complete reset</li>
        </ul>
    </div>

    <div class="test-section">
        <strong>Test Text (15 words):</strong> This is a test sentence with exactly fifteen words to verify that the word counting functionality works correctly and accurately.
    </div>

    <div class="test-section">
        <strong>Longer Test (30 words):</strong> Mathematics is the study of numbers, shapes, and patterns that help us understand the world around us. It includes arithmetic, algebra, geometry, calculus, and statistics. Math helps us solve problems and make predictions.
    </div>

    <div class="test-section">
        <strong>Math Problem Test:</strong> Find the midpoint of the line segment with endpoints (‚àí5,3) and (7,5). This should be detected as a math problem, not reading comprehension.
    </div>

    <div class="instructions">
        <h3>üîÑ If Extension Still Not Updating:</h3>
        <ol>
            <li><strong>Close all Chrome windows</strong> completely</li>
            <li><strong>Reopen Chrome</strong></li>
            <li><strong>Go to:</strong> chrome://extensions/</li>
            <li><strong>Remove extension</strong> completely</li>
            <li><strong>Load unpacked</strong> again</li>
            <li><strong>Test on this page</strong></li>
        </ol>
    </div>

    <div class="success">
        <h3>‚úÖ Success Indicators:</h3>
        <p>If working correctly, you should see:</p>
        <ul style="text-align: left; display: inline-block;">
            <li>Console shows "VERSION 2.0 - Word Count Fixed"</li>
            <li>Word count test shows "10" (not 9)</li>
            <li>Selecting text shows correct word count</li>
            <li>Math problems are detected as math, not reading</li>
        </ul>
    </div>

    <script>
        // Test word counting locally
        function testWordCount(text) {
            const words = text.trim().split(/\s+/).filter(word => word.length > 0);
            return words.length;
        }

        // Test with sample text
        const sampleText = "This is a test sentence with exactly fifteen words to verify that the word counting functionality works correctly and accurately.";
        const wordCount = testWordCount(sampleText);
        
        console.log('Local word count test:', wordCount, 'words');
        console.log('Expected: 15 words');
        
        // Check if extension is loaded
        setTimeout(() => {
            const extensionLoaded = document.querySelector('#ai-tutor-button') !== null;
            console.log('Extension button present:', extensionLoaded);
            
            if (!extensionLoaded) {
                console.warn('‚ö†Ô∏è Extension not detected on this page');
                console.log('Try refreshing the page or reloading the extension');
            }
        }, 2000);
    </script>
</body>
</html>
